<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Your Cart — BEAUTY_SAVER</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--accent:#ff6b6b;--muted:#7a7a85;--card:#ffffff;--bg:#f5f7fb}
        *{box-sizing:border-box}
        body{font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:#0b1220;margin:0;padding:24px}
        .container{max-width:1100px;margin:0 auto}
        .top{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}
        a.link{color:var(--accent);text-decoration:none;font-weight:600}
        .cart-grid{display:grid;grid-template-columns:1fr 340px;gap:20px}
        .items{display:flex;flex-direction:column;gap:14px}

        .card{display:flex;gap:16px;background:var(--card);padding:14px;border-radius:12px;align-items:center;box-shadow:0 6px 18px rgba(15,23,42,0.06)}
        .thumb{width:110px;height:110px;flex-shrink:0;border-radius:10px;background:#fafafa;display:flex;align-items:center;justify-content:center;overflow:hidden}
        .thumb img{width:100%;height:100%;object-fit:cover}
        .meta{flex:1}
        .title{font-weight:700;margin-bottom:8px;font-size:16px}
        .meta p{margin:0;color:var(--muted);font-size:13px}

        .controls{display:flex;align-items:center;gap:12px;margin-top:8px}
        .qty{display:flex;align-items:center;border-radius:8px;background:#f3f4f6;overflow:hidden}
        .qty button{background:transparent;border:0;padding:8px 10px;cursor:pointer;font-weight:700}
        .qty .num{min-width:40px;text-align:center;font-weight:600}

        .price-block{text-align:right;min-width:120px}
        .price{font-weight:700;font-size:16px}
        .sub{color:var(--muted);font-size:13px}

        .remove{background:transparent;border:0;color:var(--muted);cursor:pointer;padding:6px 8px;border-radius:8px}
        .remove:hover{color:var(--accent)}

        /* Checkout panel */
        .checkout{position:sticky;top:24px;background:linear-gradient(180deg,#fff,#f9fbff);padding:20px;border-radius:12px;box-shadow:0 8px 28px rgba(12,20,40,0.06);height:max-content}
        .tot-row{display:flex;justify-content:space-between;align-items:center;margin:12px 0}
        .totals strong{font-size:18px}
        .btn{display:inline-block;width:100%;text-align:center;padding:12px;border-radius:10px;background:var(--accent);color:#fff;font-weight:700;text-decoration:none}
        .btn.secondary{background:#fff;color:var(--accent);border:2px solid var(--accent)}

        .empty{background:#fff;padding:40px;border-radius:12px;text-align:center;color:var(--muted);box-shadow:0 8px 24px rgba(12,20,40,0.04)}

        @media (max-width:900px){.cart-grid{grid-template-columns:1fr}.checkout{position:static}}
    </style>
</head>
<body>
    <div class="container">
        <div class="top">
            <div><a class="link" href="index.html">← Continue shopping</a></div>
            <div><strong>Your Cart</strong></div>
        </div>

        <div class="cart-grid">
            <div class="items" id="cart-root">
                <!-- items injected here -->
            </div>

            <aside class="checkout" id="checkout-panel">
                <div style="display:flex;justify-content:space-between;align-items:center">
                    <div style="font-weight:700">Order summary</div>
                    <div id="cart-count">0</div>
                </div>
                <div style="margin-top:8px;color:var(--muted);font-size:14px">Shipping and taxes calculated at checkout</div>

                <div class="tot-row" style="margin-top:16px"><div>Items</div><div id="items-count">0</div></div>
                <div class="tot-row"><div>Subtotal</div><div id="subtotal">$0.00</div></div>
                <div class="tot-row"><div>Estimated tax</div><div id="tax">$0.00</div></div>
                <div class="tot-row" style="margin-top:8px;border-top:1px dashed #e6e9ef;padding-top:10px"><div class="totals">Total</div><div class="totals" id="total">$0.00</div></div>

                <div style="margin-top:16px">
                    <a href="#" class="btn" id="checkout-button">Checkout</a>
                </div>
                <div style="margin-top:8px">
                    <a href="#" class="btn secondary" id="clear-button">Clear cart</a>
                </div>
            </aside>
        </div>
    </div>

    <script>
        // Utility: format money
        function fmt(n){ return '$' + Number(n).toFixed(2); }

        function getCart(){ try{ return JSON.parse(localStorage.getItem('cart')||'[]') }catch(e){return []} }
        function saveCart(c){ localStorage.setItem('cart', JSON.stringify(c)); updateHeaderCount(); }
        function updateHeaderCount(){ var c = getCart(); document.getElementById('cart-count').textContent = c.reduce((s,i)=>s+(i.qty||1),0); document.getElementById('items-count').textContent = c.length }

        function calcTotals(cart){ var subtotal=0; cart.forEach(function(it){ var price = Number(it.price||9.99); subtotal += (price * (it.qty||1)) }); var tax = subtotal * 0.07; return {subtotal:subtotal, tax:tax, total:subtotal+tax} }

        function render(){
            var root = document.getElementById('cart-root'); var cart = getCart(); root.innerHTML = '';
            if(!cart.length){ root.innerHTML = '<div class="empty"><h2>Your cart is empty</h2><p>Find your favorite items and add them to the cart.</p></div>'; document.getElementById('subtotal').textContent = '$0.00'; document.getElementById('tax').textContent='$0.00'; document.getElementById('total').textContent='$0.00'; updateHeaderCount(); return }

            cart.forEach(function(it, idx){
                var card = document.createElement('div'); card.className='card';

                var thumb = document.createElement('div'); thumb.className='thumb'; var im = document.createElement('img'); im.src = it.img || 'https://via.placeholder.com/160x160?text=No+Image'; thumb.appendChild(im);

                var meta = document.createElement('div'); meta.className='meta';
                var title = document.createElement('div'); title.className='title'; title.textContent = it.title || 'Unnamed product';
                var desc = document.createElement('p'); desc.textContent = it.desc || '';

                var controls = document.createElement('div'); controls.className='controls';
                var qty = document.createElement('div'); qty.className='qty';
                var dec = document.createElement('button'); dec.textContent='−';
                var num = document.createElement('div'); num.className='num'; num.textContent = it.qty || 1;
                var inc = document.createElement('button'); inc.textContent='+';
                qty.appendChild(dec); qty.appendChild(num); qty.appendChild(inc);

                var remove = document.createElement('button'); remove.className='remove'; remove.textContent='Remove';

                controls.appendChild(qty); controls.appendChild(remove);

                meta.appendChild(title); meta.appendChild(desc); meta.appendChild(controls);

                var priceBlock = document.createElement('div'); priceBlock.className='price-block';
                var price = document.createElement('div'); price.className='price'; price.textContent = fmt(it.price || 9.99);
                var sub = document.createElement('div'); sub.className='sub'; sub.textContent = 'Subtotal: ' + fmt((it.price||9.99) * (it.qty||1));
                priceBlock.appendChild(price); priceBlock.appendChild(sub);

                card.appendChild(thumb); card.appendChild(meta); card.appendChild(priceBlock);
                root.appendChild(card);

                // handlers
                inc.addEventListener('click', function(){ cart[idx].qty = (cart[idx].qty||1)+1; saveCart(cart); render(); });
                dec.addEventListener('click', function(){ if((cart[idx].qty||1)>1){ cart[idx].qty = (cart[idx].qty||1)-1; saveCart(cart); render(); } });
                remove.addEventListener('click', function(){ cart.splice(idx,1); saveCart(cart); render(); });
            });

            var totals = calcTotals(cart);
            document.getElementById('subtotal').textContent = fmt(totals.subtotal);
            document.getElementById('tax').textContent = fmt(totals.tax);
            document.getElementById('total').textContent = fmt(totals.total);
            updateHeaderCount();
        }

        // clear button
        document.getElementById('clear-button').addEventListener('click', function(e){ e.preventDefault(); localStorage.removeItem('cart'); render(); });

        // checkout (demo)
        document.getElementById('checkout-button').addEventListener('click', function(e){ e.preventDefault(); alert('Proceeding to checkout — this is a demo.'); });

        // ensure every cart item has a price (fallback)
        (function ensurePrices(){ var c = getCart(); var changed=false; c.forEach(function(it){ if(!it.price){ it.price = 9.99; changed=true } }); if(changed) saveCart(c); })();

        render();
    </script>
</body>
</html>
